<?php
include $_SERVER["DOCUMENT_ROOT"] . "/Fooderz/funx.php";
require_once '../DataBase/PDO/DBconnect/DBconnect.php';
date_default_timezone_set('Asia/Tehran');
// persian regex[\u0600-\u06FF]
// print_r($_POST);
// die();
try
{
	$sql = 'call gridPage()';
	$stmt0 = $db->prepare($sql);
	$stmt0->execute();
	$errInfo0 = $stmt0->errorInfo();
	$stmt0->nextRowset();
}
catch (Exception $e)
{
	$err0 = $e->getMessage();
}
$openPrv_ID = ' and (';
while ($result = $stmt0->fetch())
{
	$wwt = $result['weeklyWorkTIme'];
	$wwt = json_decode($wwt, 1);
	$prv_ID = $result['prv_ID'];
	$flag = false;
	$Ta = [];
	foreach ($wwt as $v)
	{
		$From1 = $v['From'];
		$To1 = $v['To'];
		// echo $From1 . ' - ' . $To1."<br>";
		$From = strtotime(date("Y-m-d $From1:59"));
		$To = strtotime(date("Y-m-d $To1:59"));
		if ($From < Time() && Time() < $To)
		{
			$openPrv_ID .= "prv_ID = $prv_ID or ";
			$flag = true;
		}
		$Ta[] = $From;
	}
	if ($flag === false)
	{
		foreach ($Ta as $v)
		{
			// echo $v.'<br>';
			if (($v - Time()) > 0)
			{
				$Ta2[$prv_ID][] = $v - Time();
			}
		}
		if (empty($Ta2))
		{
			foreach ($Ta as $value)
			{
				$val = $value += (60 * 60 * 24);
				$Ta2[$prv_ID][] = $val -= Time();
			}
		}
		// var_dump(gmdate('H:i',($From+(60*60*24))));
		$closeList[] = $prv_ID;
		$TaArr[$prv_ID] = ((min($Ta2[$prv_ID]) / 60) < 60) ? intval(gmdate('i', min($Ta2[$prv_ID]))) . ' دقیقه' : intval(gmdate('H', min($Ta2[$prv_ID]))) . ' ساعت و ' . intval(gmdate('i', min($Ta2[$prv_ID]))) . ' دقیقه';
		// echo $From1 . ' - ' . $To1."<br>";
		// var_dump($TaArr);
// die();

	}
}
// var_dump($closeList);
// die();
$openPrv_ID = substr($openPrv_ID, 0, -3) . ")";
$stmt0->closeCursor();
// @var_dump(gmdate('i', min($Ta2)));
// die();
try
{
	$sql = 'SELECT * FROM provider WHERE confirmByAdmin=1';
	if (isset($_POST['discRes']))
	{
		$sql .= " and discount>0";
	}
	if (isset($_POST['openRes']))
	{
		// die($openPrv_ID);
		$sql .= $openPrv_ID;
	}
	if (isset($_POST['pType']) && $_POST['pType'] != 'همه')
	{
		$pType = $_POST['pType'];
		$sql .= " and provideType='$pType'";
	}
	if ($filter = @$_POST['filter'])
	{
		$sql .= " and (";
		$fil = array_keys($filter);
		foreach ($fil as $v)
		{
			$sql .= " orderType like '%" . trim($v, '\'') . "%' and";
		}
		$sql = rtrim($sql, "and");
		$sql .= ")";
	}
	if ($reg = $_POST['reg'])
	{
		$sql .= " and regions like '%$reg%'";
	}
	if ($resName = $_POST['resName'])
	{
		$sql .= " and providerName like '%$resName%'";
	}
	// die($sql);
	if (isset($_POST['sort']))
	{

		switch ($_POST['sort'])
		{
		case 'arzanTarin':
			$case = 'priceAve ASC';
			break;
		case 'geranTarin':
			$case = 'priceAve DESC';
			break;
		case 'jadidT':
			$case = 'datenTime DESC';
			break;
		case 'porForush':
			$case = 'datenTime DESC';
			break;
		}

		$sql .= ' ORDER BY ' . $case;

	}
	// echo $sql;
	// die();
	// $sql2 = 'SELECT * FROM providerName';
	$stmt = $db->prepare($sql);
	$stmt->execute();
	// $result = $stmt->fetchAll();
	$errInfo = $stmt->errorInfo();
}
catch (Exception $e)
{
	$err = $e->getMessage();
}
// var_dump($errInfo);
// echo $err;
// die();
while ($row = $stmt->fetch())
{
	$prv_ID = $row['prv_ID'];
	if (isset($closeList) && in_array($prv_ID, $closeList))
	{
		$cls = 'closed';
		@$tilTime = $TaArr[$prv_ID];
		// var_dump($tilTime);
		// $timaTa = gmdate('H:i',min($Ta));
	}
	else
	{
		// $tim//ff
		$cls = '';
	}
	$dh = arp("images/logo/") . $prv_ID . "/";
	if (is_dir($dh))
	{
		$logoName = scandir($dh);
		$logoName = end($logoName);
		// $logoName = $logoName[2];
	}
	$discount = "";
	$discount = $row['discount'];
	$disc_tag = (!empty($discount)) ? "<p class='offer'>" . $discount . "%</p>" : "";

	$regions = json_decode($row['regions']);
	$reg_str = $regions[0];

	$deliveryTime = json_decode($row['deliveryTime'], 1);
	$minDelTime = $deliveryTime['min'];
	$maxDelTime = $deliveryTime['max'];
	$deliveryTime = "$minDelTime - $maxDelTime دقیقه";
	for ($i = 1; $i < count($regions); $i++)
	{
		$reg_str .= " - " . $regions[$i];
	}
	$giftRow = $row['menu'];
	$giftRow = json_decode($giftRow, true);
	$gifted = (isset($giftRow['gift'])) ? $giftRow['gift'] : [];
	?>

			<div class="grid-elem <?php echo $cls ?>">
			<form name="sb" id="sb" action="menu.php" method="post" accept-charset="utf-8">
			<input type="text" name="prvID" value="<?php echo $prv_ID ?>" hidden id="">
			<input type="text" name="opCL" hidden value="<?php echo(isset($TaArr[$prv_ID]))?$TaArr[$prv_ID]:'' ?>">
	

								<div class="elem-details ">
									<?php echo $disc_tag ?>
									<div class="img-container ">
                                        <div class="transparent_layer"></div>
                                        <p class="closed-label">بسته است<br />شروع سفارش از  <?php echo $tilTime; ?>  دیگر</p>

                                        <svg class="like" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50">
                                            <path d="M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543  c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503  c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z"/>
                                        </svg>

                                        <div class="min-bask-val" title="حداقل میزان سفارش">
                                            <svg class="cart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"  x="0px" y="0px" viewBox="0 0 260.293 260.293" >
                                                <g>
                                                    <path d="M258.727,57.459c-1.42-1.837-3.612-2.913-5.934-2.913H62.004l-8.333-32.055c-0.859-3.306-3.843-5.613-7.259-5.613H7.5   c-4.142,0-7.5,3.358-7.5,7.5c0,4.142,3.358,7.5,7.5,7.5h33.112l8.333,32.055c0,0.001,0,0.001,0.001,0.002l29.381,112.969   c0.859,3.305,3.843,5.612,7.258,5.612h137.822c3.415,0,6.399-2.307,7.258-5.612l29.385-112.971   C260.636,61.687,260.147,59.295,258.727,57.459z M117.877,167.517H91.385l-5.892-22.652h32.384V167.517z M117.877,129.864H81.592   l-5.895-22.667h42.18V129.864z M117.877,92.197H71.795l-5.891-22.651h51.973V92.197z M176.119,167.517h-43.242v-22.652h43.242   V167.517z M176.119,129.864h-43.242v-22.667h43.242V129.864z M176.119,92.197h-43.242V69.546h43.242V92.197z M217.609,167.517   h-26.49v-22.652h32.382L217.609,167.517z M227.403,129.864h-36.284v-22.667h42.18L227.403,129.864z M237.201,92.197h-46.081V69.546   h51.974L237.201,92.197z" fill="#38c310 "/>
                                                    <path d="M105.482,188.62c-15.106,0-27.396,12.29-27.396,27.395c0,15.108,12.29,27.4,27.396,27.4   c15.105,0,27.395-12.292,27.395-27.4C132.877,200.91,120.588,188.62,105.482,188.62z M105.482,228.415   c-6.835,0-12.396-5.563-12.396-12.4c0-6.835,5.561-12.395,12.396-12.395c6.834,0,12.395,5.561,12.395,12.395   C117.877,222.853,112.317,228.415,105.482,228.415z" fill="#38c310 "/>
                                                    <path d="M203.512,188.62c-15.104,0-27.392,12.29-27.392,27.395c0,15.108,12.288,27.4,27.392,27.4   c15.107,0,27.396-12.292,27.396-27.4C230.908,200.91,218.618,188.62,203.512,188.62z M203.512,228.415   c-6.833,0-12.392-5.563-12.392-12.4c0-6.835,5.559-12.395,12.392-12.395c6.836,0,12.396,5.561,12.396,12.395   C215.908,222.853,210.347,228.415,203.512,228.415z" fill="#38c310 "/>
                                                </g>
                                            </svg>
                                            <?php echo $row['minimomOrder'] ?> تومان
                                        </div>
                                        <div class="peyk-cost" title="هزینه پیک">
                                            <svg class="motobike" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 512 512">
                                                <path style="fill:#616161;" d="M343.843,278.587c0,7.248-1.787,14.085-4.939,20.078c-7.228,13.734-21.634,23.09-38.229,23.09  h-64.251v91.357h-32.125l-1.646-20.078l-6.726-81.87c-1.436-17.539,12.419-32.577,30.017-32.577L343.843,278.587L343.843,278.587z"/>
                                                <path style="fill:#424242;" d="M343.843,278.587c0,7.248-1.787,14.085-4.939,20.078h-67.343c-11.089,0-20.078-8.989-20.078-20.078  l0,0H343.843z"/>
                                                <path style="fill:#F4511E;" d="M343.843,168.156v110.431h-72.282V117.959h22.086c7.56,0,14.728,1.677,21.153,4.668  C331.957,130.609,343.843,147.997,343.843,168.156z"/>
                                                <path style="fill:#B0BEC5;" d="M7.529,443.23c0-38.257,31.013-69.271,69.271-69.271s69.271,31.013,69.271,69.271H7.529z"/>
                                                <path style="fill:#616161;" d="M27.843,443.23c-0.802,3.556-1.239,7.248-1.239,11.043c0,27.678,22.518,50.196,50.196,50.196  s50.196-22.518,50.196-50.196c0-3.795-0.437-7.487-1.239-11.043H27.843z"/>
                                                <path style="fill:#D8D7DA;" d="M60.049,443.23c-2.097,3.171-3.327,6.965-3.327,11.043c0,11.071,9.007,20.078,20.078,20.078  s20.078-9.007,20.078-20.078c0-4.079-1.23-7.872-3.327-11.043H60.049z"/>
                                                <path style="fill:#616161;" d="M330.023,443.23c-0.802,3.556-1.239,7.248-1.239,11.043c0,27.678,22.518,50.196,50.196,50.196  s50.196-22.518,50.196-50.196c0-3.795-0.437-7.487-1.239-11.043H330.023z"/>
                                                <path style="fill:#D8D7DA;" d="M362.229,443.23c-2.097,3.171-3.327,6.965-3.327,11.043c0,11.071,9.007,20.078,20.078,20.078  s20.078-9.007,20.078-20.078c0-4.079-1.23-7.872-3.327-11.043H362.229z"/>
                                                <path style="fill:#F4511E;" d="M183.075,195.131L130.54,371.901l-6.224,20.942c-11.284-10.642-26.132-17.528-42.576-18.693  l5.913-19.607L130.6,212.037c4.377-16.043,20.932-25.51,36.974-21.133L183.075,195.131z"/>
                                                <path style="fill:#FDD844;" d="M88.847,202.289c17.742,0,32.125,14.383,32.125,32.125s-14.383,32.126-32.125,32.126V202.289z"/>
                                                <polygon style="fill:#424242;" points="236.424,393.034 236.424,413.112 204.298,413.112 202.652,393.034 "/>
                                                <path style="fill:#B0BEC5;" d="M294.651,413.112v30.118H181.208l-41.392-32.065l-2.811-2.179c-3.413-5.993-7.7-11.435-12.69-16.143  l7.821-26.323l17.127,12.85l44.996,33.742L294.651,413.112L294.651,413.112z"/>
                                                <path style="fill:#F4511E;" d="M458.29,381.991v61.239H294.651V321.756h103.404c16.525,0,31.503,6.656,42.376,17.428  c6.385,6.325,11.364,14.065,14.426,22.729C457.086,368.197,458.29,374.953,458.29,381.991z"/>
                                                <path style="fill:#D84315;" d="M440.481,342.968c-0.713,22.247-17.96,39.022-40.117,39.022h-65.556  c-15.41,0-29.495-5.823-40.157-15.39v-44.845h103.404c16.525,0,31.503,6.656,42.376,17.428  C440.511,340.428,440.521,341.693,440.481,342.968z"/>
                                                <path style="fill:#B0BEC5;" d="M400.362,361.912h-65.554c-22.178,0-40.157-17.979-40.157-40.157l0,0h103.404  c1.311,0,2.613,0.042,3.904,0.124C427.592,323.518,426.047,361.912,400.362,361.912z"/>
                                                <rect x="373.961" y="231.404" style="fill:#F4511E;" width="130.51" height="90.353"/>
                                                <path style="fill:#D84315;" d="M299.155,132.768c5.684-2.549,10.982-5.965,15.645-10.141c-6.425-2.992-13.593-4.668-21.153-4.668  h-22.086v6.254v13.744v131.584c22.889-4.658,40.157-24.947,40.157-49.182v-60.235C311.718,149.2,306.839,139.4,299.155,132.768z"/>
                                                <path style="fill:#FDD8A8;" d="M303.365,105.782c-6.024,6.204-14.035,10.471-23.01,11.766c-1.887,0.271-3.815,0.412-5.783,0.412  c-20.48,0-37.376-15.33-39.846-35.137c-0.201-1.646-0.311-3.323-0.311-5.02c0-5.331,1.044-10.411,2.931-15.059h41.241v13.402  C278.588,90.954,289.28,103.262,303.365,105.782z"/>
                                                <path style="fill:#FFC477;" d="M303.365,105.782c-6.024,6.204-14.035,10.471-23.01,11.766  c-11.445-7.861-19.486-20.339-21.404-34.726h-24.225c-0.201-1.646-0.311-3.323-0.311-5.02c0-5.331,1.044-10.411,2.931-15.059h41.241  v13.402C278.588,90.954,289.28,103.262,303.365,105.782z"/>
                                                <g>
                                                    <path style="fill:#F4511E;" d="M338.824,106.261c4.244-9.541,6.421-20.196,5.963-31.394c-1.478-36.109-30.634-65.501-66.73-67.255   c-35.103-1.705-57.571,22.512-64.724,55.131h65.255v13.399c0,16.634,13.484,30.118,30.118,30.118H338.824z"/>
                                                    <path style="fill:#F4511E;" d="M204.298,250.477h57.224c16.634,0,30.118-13.484,30.118-30.118v-60.235   c0-8.872-7.191-16.063-16.063-16.063l0,0c-8.872,0-16.063,7.191-16.063,16.063v58.227h-55.216V250.477z"/>
                                                </g>
                                                <path style="fill:#FDD8A8;" d="M204.298,218.352H174.18c-8.872,0-16.063,7.191-16.063,16.063l0,0  c0,8.872,7.191,16.063,16.063,16.063h30.118V218.352z"/>
                                                <rect x="373.961" y="231.404" style="fill:#D84315;" width="130.51" height="20.078"/>
                                                <path style="fill:#F4511E;" d="M504.471,206.305c0-8.316-6.742-15.059-15.059-15.059H389.02c-8.316,0-15.059,6.742-15.059,15.059  v25.098h130.51V206.305z"/>
                                                <path style="fill:#D84315;" d="M130.54,371.901l-6.224,20.942c-11.284-10.642-26.132-17.528-42.576-18.693l5.913-19.607  C103.625,356.481,118.302,362.655,130.54,371.901z"/>
                                                <path style="fill:#90A4AE;" d="M149.263,379.371l-9.447,31.794l-2.811-2.179c-3.413-5.993-7.7-11.435-12.69-16.143l7.821-26.323  L149.263,379.371z"/>
                                                <path d="M489.412,183.716H389.02c-12.456,0-22.588,10.134-22.588,22.588v107.922H336.69c7.398-7.475,12.493-17.232,14.12-28.11  h0.562l0,0l0,0V168.156c0-25.029-16.016-46.379-38.334-54.364h30.676l1.988-4.469c4.879-10.97,7.102-22.666,6.607-34.762  c-1.63-39.825-34.085-72.534-73.888-74.468c-36.035-1.739-63.804,21.64-72.444,61.039l-2.005,9.142h23.518  c-0.396,2.478-0.605,4.989-0.605,7.529c0,22.672,15.908,41.685,37.145,46.498v15.262c-7.183,4.049-12.047,11.746-12.047,20.562  v50.698h-65.721l6.22-20.931l-22.929-6.251c-9.701-2.645-19.853-1.355-28.584,3.635c-8.7,4.972-14.952,13.026-17.613,22.683  l-0.996,3.304c-7.034-11.107-19.425-18.503-33.518-18.503h-7.526v79.31h7.529c5.788,0,11.284-1.257,16.246-3.496l-28.891,95.871  C34.13,366.768,0,401.081,0,443.23v7.529h19.192c-0.072,1.172-0.117,2.344-0.117,3.514c0,31.83,25.895,57.725,57.725,57.725  s57.725-25.895,57.725-57.725c0-1.17-0.045-2.342-0.117-3.514H153.6v-7.529c0-4.324-0.377-8.558-1.067-12.69l26.1,20.219h142.74l0,0  l0,0c-0.072,1.172-0.117,2.344-0.117,3.514c0,31.83,25.895,57.725,57.725,57.725s57.725-25.895,57.725-57.725  c0-1.17-0.045-2.342-0.117-3.514h29.231v-68.769c0-7.758-1.301-15.36-3.863-22.585c-4.272-12.098-11.784-22.411-21.345-30.121H512  v-122.98C512,193.85,501.867,183.716,489.412,183.716z M96.376,210.997c9.892,3.187,17.067,12.481,17.067,23.417  s-7.175,20.23-17.067,23.417V210.997z M389.02,198.775h100.392c4.152,0,7.529,3.377,7.529,7.529v17.569h-30.118v-12.549h-15.059  v12.549h-20.078v-12.549h-15.059v12.549H381.49v-17.569C381.49,202.152,384.867,198.775,389.02,198.775z M401.053,329.38  c0.217,0.013,0.435,0.023,0.651,0.039c8.519,0.66,11.356,7.21,11.183,12.669c-0.181,5.671-3.57,12.295-12.524,12.295h-65.554  c-15.4,0-28.343-10.725-31.75-25.098l0,0l96.998,0.04C401.051,329.324,400.056,329.324,401.053,329.38z M287.122,405.583h-43.169  v-76.298h43.169V405.583z M300.675,314.226L300.675,314.226h-71.78v91.357h-17.659l-7.801-95.03  c-0.523-6.365,1.572-12.457,5.899-17.153c4.327-4.697,10.227-7.283,16.613-7.283h109.567l0,0  C332.048,302.164,317.743,314.226,300.675,314.226z M174.18,258.007h87.341c0.844,0,1.68-0.038,2.51-0.093v13.144h-38.086  c-10.489,0-20.58,4.424-27.688,12.138c-7.108,7.715-10.691,18.134-9.833,28.589l7.658,93.284l-55.236-41.427l31.419-105.72  C172.898,257.973,173.536,258.007,174.18,258.007z M336.314,168.156v102.902H279.09v-17.416  c11.93-6.323,20.078-18.866,20.078-33.282v-60.235c0-11.815-8.73-21.627-20.078-23.329v-11.306h14.557  C317.174,125.489,336.314,144.629,336.314,168.156z M277.692,15.133c32.09,1.559,58.258,27.932,59.572,60.043  c0.333,8.134-0.854,16.037-3.533,23.557h-25.025c-1.163,0-2.306-0.088-3.421-0.259l-0.59-0.105c-0.66-0.118-1.307-0.266-1.944-0.438  c-0.034-0.009-0.067-0.019-0.101-0.029c-0.601-0.166-1.192-0.356-1.77-0.568c-0.093-0.034-0.184-0.073-0.277-0.109  c-0.432-0.165-0.855-0.347-1.273-0.537c-0.259-0.118-0.515-0.241-0.768-0.369c-0.283-0.142-0.561-0.29-0.836-0.443  c-0.529-0.295-1.045-0.609-1.547-0.945c-0.033-0.022-0.067-0.042-0.099-0.064c-1.499-1.015-2.87-2.205-4.085-3.54l-0.001-0.001  c-0.477-0.525-0.93-1.073-1.356-1.641c-0.011-0.015-0.023-0.029-0.034-0.044c-0.618-0.827-1.179-1.7-1.681-2.608  c-0.137-0.249-0.268-0.501-0.396-0.755c-0.159-0.315-0.31-0.634-0.455-0.957c-0.143-0.322-0.28-0.648-0.409-0.977  c-0.083-0.213-0.165-0.426-0.242-0.641c-0.155-0.436-0.295-0.878-0.424-1.326c-0.042-0.148-0.086-0.294-0.125-0.443  c-0.138-0.52-0.255-1.047-0.355-1.58c-0.024-0.126-0.046-0.255-0.068-0.382c-0.095-0.559-0.174-1.124-0.227-1.696  c-0.009-0.091-0.013-0.183-0.021-0.274c-0.05-0.613-0.082-1.232-0.082-1.856v-20.93h-62.924l0,0  C232.035,28.702,251.893,13.89,277.692,15.133z M241.945,77.803c0-2.556,0.294-5.075,0.877-7.529h28.236v5.871  c0,0.742,0.027,1.477,0.07,2.209c0.014,0.238,0.036,0.473,0.054,0.709c0.038,0.495,0.083,0.989,0.141,1.479  c0.032,0.273,0.066,0.546,0.104,0.817c0.063,0.454,0.137,0.905,0.216,1.353c0.048,0.276,0.093,0.553,0.149,0.827  c0.097,0.487,0.21,0.969,0.325,1.449c0.123,0.512,0.26,1.018,0.404,1.521c0.089,0.312,0.175,0.626,0.272,0.935  c0.133,0.422,0.278,0.837,0.425,1.253c0.072,0.203,0.144,0.406,0.219,0.606c0.174,0.467,0.356,0.929,0.547,1.386  c0.036,0.086,0.074,0.172,0.111,0.258c2.895,6.776,7.714,12.573,13.863,16.628c-4.15,1.871-8.688,2.855-13.386,2.855  C256.582,110.43,241.945,95.794,241.945,77.803z M267.043,225.881v-65.757c0-4.705,3.828-8.533,8.533-8.533  c4.705,0,8.533,3.828,8.533,8.533v60.235c0,12.455-10.133,22.588-22.588,22.588H174.18c-4.705,0-8.533-3.828-8.533-8.533  c0-4.705,3.828-8.533,8.533-8.533H267.043z M137.806,214.212l0.055-0.192c1.587-5.822,5.346-10.676,10.584-13.669  c5.238-2.994,11.329-3.77,17.15-2.182l8.067,2.199l-3.194,10.749c-11.251,1.786-19.88,11.551-19.88,23.297  c0,6.922,2.997,13.156,7.76,17.476l-30.348,102.116l0,0l-1.29,4.341l-6.422,21.608c-0.11-0.076-0.226-0.144-0.336-0.219  c-0.707-0.482-1.43-0.941-2.153-1.398c-0.306-0.193-0.604-0.398-0.913-0.585c-7.677-4.717-16.242-8.115-25.381-9.894  L137.806,214.212z M119.467,454.273c0,23.527-19.14,42.667-42.667,42.667s-42.667-19.141-42.667-42.667  c0-1.169,0.049-2.341,0.148-3.514H49.43c-0.149,1.161-0.238,2.332-0.238,3.514c0,15.222,12.384,27.608,27.608,27.608  s27.608-12.385,27.608-27.608c0-1.182-0.089-2.353-0.238-3.514h15.149C119.417,451.932,119.467,453.105,119.467,454.273z   M89.349,454.273c0,6.92-5.629,12.549-12.549,12.549s-12.549-5.629-12.549-12.549c0-1.198,0.172-2.379,0.505-3.514h24.087  C89.177,451.894,89.349,453.074,89.349,454.273z M138.084,435.701L138.084,435.701H15.516l0,0l0,0  c3.724-30.507,29.787-54.212,61.284-54.212c0.962,0,1.917,0.023,2.869,0.067l1.545,0.109c9.678,0.684,19.045,3.676,27.308,8.624  c0.039,0.024,0.08,0.046,0.119,0.07c0.55,0.33,1.089,0.679,1.629,1.027c0.257,0.167,0.516,0.328,0.771,0.498  c0.374,0.25,0.742,0.511,1.111,0.769c0.408,0.286,0.816,0.569,1.217,0.864c0.245,0.181,0.485,0.367,0.728,0.551  c0.509,0.387,1.015,0.776,1.512,1.179c0.156,0.125,0.308,0.255,0.463,0.383c0.563,0.465,1.12,0.937,1.667,1.422  c0.109,0.097,0.217,0.196,0.326,0.294c0.603,0.543,1.2,1.094,1.781,1.66c0.014,0.013,0.028,0.027,0.041,0.04  c0.646,0.63,1.278,1.274,1.896,1.931c0.002,0.002,0.003,0.003,0.005,0.005c2.464,2.621,4.697,5.459,6.677,8.479  c0.078,0.12,0.156,0.241,0.234,0.361c0.391,0.605,0.77,1.218,1.139,1.837c0.1,0.168,0.202,0.335,0.3,0.505  C134.275,419.241,137.047,427.205,138.084,435.701L138.084,435.701z M287.122,435.701H183.783l-41.008-31.768  c-0.08-0.135-0.17-0.262-0.251-0.396c-0.174-0.287-0.36-0.565-0.538-0.849c-1.788-2.87-3.755-5.62-5.902-8.227  c-0.017-0.021-0.033-0.042-0.051-0.063c-0.678-0.821-1.381-1.622-2.093-2.415c-0.147-0.164-0.289-0.329-0.437-0.491  c-0.237-0.259-0.459-0.53-0.699-0.786l3.469-11.671l55.477,41.608l0,0h95.373l0,0V435.701z M421.647,454.273  c0,23.527-19.14,42.667-42.667,42.667c-23.527,0-42.667-19.14-42.667-42.667c0-1.169,0.049-2.341,0.148-3.514h15.149  c-0.149,1.161-0.238,2.332-0.238,3.514c0,15.222,12.384,27.608,27.608,27.608c15.223,0,27.608-12.385,27.608-27.608  c0-1.182-0.089-2.353-0.238-3.514H421.5C421.598,451.932,421.647,453.105,421.647,454.273z M391.529,454.273  c0,6.92-5.629,12.549-12.549,12.549s-12.549-5.629-12.549-12.549c0-1.198,0.172-2.379,0.505-3.514h24.087  C391.358,451.894,391.529,453.074,391.529,454.273z M450.761,435.701H302.18l0,0v-79.215c8.537,8.025,20.014,12.957,32.627,12.957  h65.554c17.541,0,27.149-13.52,27.575-26.874c0.043-1.358-0.015-2.723-0.163-4.082c9.048,6.178,16.174,15.146,19.986,25.942  c1.991,5.614,3.001,11.523,3.001,17.562L450.761,435.701 M381.49,314.226L381.49,314.226v-75.294h35.137v12.549h15.059v-12.549  h20.078v12.549h15.059v-12.549h30.118v75.294H381.49z"/>
                                                <rect x="482.384" y="360.408" width="29.114" height="15.059"/>
                                                <rect x="482.384" y="398.055" width="29.114" height="15.059"/>
                                                <rect x="482.384" y="435.702" width="29.114" height="15.059"/>
                                                <g>
                                                    <path style="fill:#FFFFFF;" d="M56.622,418.902l-9.627-11.58c8.359-6.948,18.944-10.774,29.804-10.774v15.059   C69.448,411.607,62.282,414.198,56.622,418.902z"/>
                                                    <path style="fill:#FFFFFF;" d="M382.996,420.642h-15.059v-15.059h15.059V420.642z M352.878,420.642h-35.639v-37.647h15.059v22.588   h20.58V420.642z"/>
                                                    <rect x="420.643" y="381.992" style="fill:#FFFFFF;" width="15.059" height="23.09"/>
                                                    <rect x="310.212" y="229.396" style="fill:#FFFFFF;" width="15.059" height="29.114"/>
                                                    <polygon style="fill:#FFFFFF;" points="481.882,299.167 449.255,299.167 449.255,284.108 466.824,284.108 466.824,266.54    481.882,266.54  "/>
                                                    <path style="fill:#FFFFFF;" d="M307.179,76.568l-0.008-0.162c-0.226-5.514-1.905-10.936-4.858-15.679l12.785-7.957   c4.31,6.926,6.769,14.856,7.115,22.937l0.007,0.187l-7.701,0.257L307.179,76.568z"/>
                                                    <rect x="254.494" y="30.116" style="fill:#FFFFFF;" width="34.133" height="15.059"/>
                                                </g>
                                            </svg>
                                            <?php echo $row['deliveryCost'] ?> تومان
                                        </div>
										<img src="images/blog2.jpg" alt="" />
									</div>
									<div class="info">
										<h3 class="title"><?php echo $row['providerName']; ?></h3>
										<h4 class="address"><?php echo $reg_str; ?></h4>
                                        <P class="time-limit pull-left"><?php echo $deliveryTime ?></P>
                                        <br />
										<!-- star rating -->
										<fieldset class="rating">
											<input type="radio" id="star5" name="rating" value="5" /><label class = "full" for="star5" title="Awesome - 5 stars"></label>
											<input type="radio" id="star4half" name="rating" value="4 and a half" /><label class="half" for="star4half" title="Pretty good - 4.5 stars"></label>
											<input type="radio" id="star4" name="rating" value="4" /><label class = "full" for="star4" title="Pretty good - 4 stars"></label>
											<input type="radio" id="star3half" name="rating" value="3 and a half" /><label class="half" for="star3half" title="Meh - 3.5 stars"></label>
											<input type="radio" id="star3" name="rating" value="3" /><label class = "full" for="star3" title="Meh - 3 stars"></label>
											<input type="radio" id="star2half" name="rating" value="2 and a half" /><label class="half" for="star2half" title="Kinda bad - 2.5 stars"></label>
											<input type="radio" id="star2" name="rating" value="2" /><label class = "full" for="star2" title="Kinda bad - 2 stars"></label>
											<input type="radio" id="star1half" name="rating" value="1 and a half" /><label class="half" for="star1half" title="Meh - 1.5 stars"></label>
											<input type="radio" id="star1" name="rating" value="1" /><label class = "full" for="star1" title="Sucks big time - 1 star"></label>
											<input type="radio" id="starhalf" name="rating" value="half" /><label class="half" for="starhalf" title="Sucks big time - 0.5 stars"></label>
										</fieldset>

										<div class="restaurant-logo">
											<img src="<?php echo arp2('images/logo/') . $prv_ID . '/' . $logoName ?>" alt="logo" />
										</div>
									</div>
								</div>
                                <span title="رستوران اشانتیون دارد">
                                 <?php if ($gifted)
	{
		?>   <svg class="eshantion-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                                        <path style="fill:#FC3842;" d="M487.04,199.947H310.903H24.961v293.752c0,10.106,8.192,18.301,18.302,18.301h84.275h27.386h155.979  h47.194h110.64c10.109,0,18.303-8.194,18.303-18.301V297.303v-26.295L487.04,199.947L487.04,199.947z"/>
                                        <path style="fill:#EF2235;" d="M55.783,493.699V214.622H24.961v279.077c0,10.106,8.192,18.301,18.302,18.301h30.821  C63.975,512,55.783,503.806,55.783,493.699z"/>
                                        <path class="eshantion-door" style="fill:#86ab6d;" d="M489.328,118.545h-131.23h-47.194H22.674c-10.107,0-18.301,8.195-18.301,18.303v64.626  c0,7.262,5.887,13.148,13.147,13.148h293.383h47.194h136.384c7.261,0,13.147-5.887,13.147-13.148v-64.626  C507.629,126.74,499.435,118.545,489.328,118.545z"/>
                                        <path style="fill:#0DBAA1;" d="M35.194,201.474v-64.626c0-10.107,8.194-18.303,18.301-18.303H22.674  c-10.107,0-18.301,8.195-18.301,18.303v64.626c0,7.262,5.887,13.148,13.147,13.148h30.822  C41.08,214.622,35.194,208.735,35.194,201.474z"/>
                                        <g>
                                            <path style="fill:#EF3A43;" d="M299.358,126.613c-4.532-0.238-8.012-4.106-7.774-8.638c0.239-4.532,4.104-8.045,8.639-7.773   c48.487,2.553,94.907-19.103,124.174-57.934c2.73-3.624,7.883-4.351,11.508-1.617c3.625,2.731,4.349,7.884,1.616,11.508   C404.941,105.391,353.241,129.472,299.358,126.613z"/>
                                            <path style="fill:#EF3A43;" d="M74.479,62.159c-2.731-3.624-2.009-8.776,1.617-11.508c3.622-2.731,8.775-2.007,11.507,1.617   c29.267,38.831,75.689,60.483,124.176,57.934c4.535-0.265,8.4,3.241,8.64,7.773c0.237,4.531-3.242,8.399-7.774,8.638   C158.826,129.474,107.096,105.44,74.479,62.159z"/>
                                        </g>
                                        <rect x="201.101" y="118.55" style="fill:#FFCA54;" width="109.81" height="393.45"/>
                                        <rect x="201.101" y="118.55" style="fill:#F99830;" width="54.902" height="393.45"/>
                                        <path class="eshantion-tie" style="fill:#FF4B4E;" d="M311.158,0c-23.627,0-44.261,13.005-55.157,32.224C245.103,13.005,224.469,0,200.842,0  c-34.946,0-63.377,28.43-63.377,63.375c0,34.946,28.431,63.376,63.377,63.376h55.159h55.157c34.945,0,63.374-28.43,63.374-63.376  C374.532,28.43,346.104,0,311.158,0z M247.783,110.316h-46.941c-25.884,0-46.942-21.058-46.942-46.941s21.059-46.94,46.942-46.94  s46.941,21.058,46.941,46.94L247.783,110.316L247.783,110.316z M311.158,110.316h-46.94V63.375c0-25.883,21.058-46.94,46.94-46.94  s46.939,21.058,46.939,46.94C358.098,89.259,337.041,110.316,311.158,110.316z"/>
                                    </svg>
                                <?php }?>
                                </span>

                                		</form>

							</div>

						<?php }?>
<script>
	$('.grid-elem').click(function(){
		$(this).children('form').submit();
	})
</script>